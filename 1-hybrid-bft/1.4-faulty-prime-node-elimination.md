# 1.4 Faulty Prime Node Elimination

The elimination of a faulty Prime node can be conducted by various mechanisms in the HBFT, including the timing of the responses between $$p$$ and $$S$$ for the first layer and eventually between $$V$$ and $$S$$ for the second layer. This mechanism is used in RAFT and Covenant will use this mechanism as a primary mechanism for detecting and elimination of the faulty leader nodes in the first and the second layers.&#x20;

In addition, we consider another mechanism to ensure that the $$p$$ and $$S$$ are not faulty nodes in the overall consensus mechanism.&#x20;

A faulty $$p$$ that assigns different $$pre−prepare$$ to different replicas will not trigger a time-out. Thus, we present a possible mechanism without a timer to detect faulty Prime and Supervisor nodes that multicast random messages during $$prepare$$ phase. Since one replica may skip several operations when the connection is lost, we want the detection to be independent without the prerequisite of total order and continuous sequence number α, i.e., replicas accept discrete α as long as it is consistently increasing/decreasing. To facilitate understanding of the mechanism, we ﬁrst assume that the primary is not faulty. Since there are at most $$f$$ faulty replicas, the collected $$2f+ 1$$ messages contain $$f$$ faulty messages in the worst situation. And the rest $$f+ 1$$ messages must be obtained from non-faulty replicas; thus, those $$f+ 1$$ messages are identical. Those faulty messages (or the digest of the messages)could be unmatched by each other. Or, the faulty messages are identical, but those faulty messages are different from those matching messages among non-faulty nodes. For simplicity, we say that in the latter case, there are two versions of messages in $$2f+ 1$$ collections, one kept among non-faulty replicas, and another version is kept among faulty replicas. When $$p$$ is non-faulty and each replica collects $$2f+ 1$$ messages, the number of different versions $$n_v$$ falls in the interval $$2$$ and $$f+ 1$$. That is because, in the worst case mentioned above, each faulty replica multicasts different versions of messages, resulting in $$f$$ different versions among faulty replicas. Besides, there is an additional version kept by $$f+ 1$$ non-faulty replicas. At the presence of faulty Prime node that multicasts random messages, the messages in $$pre−prepare$$ that received by non-faulty replicas differ. In other words, $$n_v$$ exceeds the upper bound $$f+ 1$$, and the $$p$$ is detected to be faulty. This condition, along with timeout, triggers the $$view−change$$ phase.
